<section class="cardstack-message-summary">
  <h4>Dashboards</h4>
  <div class="cardstack-workflow-tag-with-count" onclick={{action (mut selectedTag) tag}}>
    <div class="name">Today</div>
    <div class="count" data-test-date-range-counter="Today">{{todaysMessageCount}}</div>
  </div>
  {{#each-in groupedMessages as |priority messagesWithPriority|}}
    <h4 data-test-priority-header={{priority}}>{{priority}}</h4>
    {{#each-in messagesWithPriority as |tag messagesAndCount|}}
      <div class="cardstack-workflow-tag-with-count" onclick={{action (mut selectedTag) tag}}>
        <div class='name'>{{tag}}</div>
        <div class="count" data-test-tag-counter={{tag}}>{{messagesAndCount.unhandledCount}}</div>
      </div>
    {{/each-in}}
  {{/each-in}}
</section>

{{#if messagesWithSelectedTag.length}}
  <section class="cardstack-cue-cards">
    {{#each messagesWithSelectedTag as |message|}}
      {{!-- <div class="message-card" data-test-cue-card>{{message.tag}}</div> --}}
      <div class="message-card" data-test-message-card-tag={{message.tag}}>
        {{cardstack-content content=message format="card"}}
      </div>
    {{/each}}
  </section>
{{/if}}